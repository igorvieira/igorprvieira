---
---

<script>
  function initScrollAnimations() {
    const articleContent = document.querySelector('.article-content');
    if (!articleContent) return;

    const elements = articleContent.querySelectorAll('p, h1, h2, h3, h4, h5, h6, ul, ol, pre, blockquote, img, table');

    elements.forEach((el, index) => {
      el.classList.add('scroll-animate');
      (el as HTMLElement).style.transitionDelay = `${index * 0.02}s`;
    });

    const observer = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            entry.target.classList.add('scroll-animate-visible');
            observer.unobserve(entry.target);
          }
        });
      },
      {
        threshold: 0.15,
        rootMargin: '0px 0px -10% 0px'
      }
    );

    elements.forEach((el) => {
      observer.observe(el);
    });
  }

  document.addEventListener('DOMContentLoaded', initScrollAnimations);
  document.addEventListener('astro:page-load', initScrollAnimations);
</script>

<style is:global>
  .scroll-animate {
    opacity: 0;
    transform: translateY(8px);
    transition: opacity 0.35s ease, transform 0.35s ease;
  }

  .scroll-animate-visible {
    opacity: 1;
    transform: translateY(0);
  }
</style>
